<div class="page-header">
  <h1 class ='text-center'>Jobs</h1>
    <button class="btn btn-default center-block" type="button" ui-sref="main_private.jobs_create">Add new</button>
</div>

<div class="page-header col-xs-12">
  <h3 class ='text-center'>Pending Jobs</h3>
</div>

<div class="panel-group row col-xs-12" id="jobs_incompleted_accordion" role="tablist" aria-multiselectable="true">
  <div class="panel panel-default" ng-repeat = 'job in jobs' ng-if='!job.date_completed'>
    <div class="panel-heading" role="tab">
      <h2 class="panel-title">
        <div class='row' role="button" data-toggle="collapse" data-parent="#jobs_incompleted_accordion" href="#{{job._id}}" aria-expanded="false" aria-controls="{{job._id}}">
          <span class='col-xs-4'>Property: {{job.propertie.name}}</span> 
          <span class='col-xs-2 col-xs-offset-1'>Unit: {{job.unit}}</span> 
          <span class='col-xs-4 col-xs-offset-1'>Manager: {{job.manager.first}} {{job.manager.last}}</span>
        </div>
      </h2>
    </div>
    <div id="{{job._id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
      <div class="panel-body">
        <div class="list-group">
        <div class="list-group-item">
          <ul class="nav nav-pills nav-justified">
            <li role="presentation" ui-sref = 'main_private.jobs_edit({id:job._id})'><a href="#">Edit Job</a></li>
            <li role="presentation"><a href="#">Send To Worker</a></li>
          </ul>
        </div>  
          <div class="list-group-item">
            <h5 class="list-group-item-heading"><strong>General:</strong></h5>
            <br>
            <p class="list-group-item-text"><strong>Manager:</strong> {{job.manager.first}} {{job.manager.last}}</p>
            <p class="list-group-item-text"><strong>Property:</strong> {{job.propertie.name}}</p>
            <p class="list-group-item-text"><strong>Unit:</strong> {{job.unit}}</p>
            <p class="list-group-item-text"><strong>Price:</strong> {{job.totalPrice}} $</p>
            <p class="list-group-item-text"><strong>Cost:</strong> {{job.totalCost}} $</p>
            <p class="list-group-item-text"><strong>Invoice Number:</strong> {{job.invoiceNumber}}</p>
            <p class="list-group-item-text"><strong>poNumber:</strong> {{job.porNumber}}</p>
            <p class="list-group-item-text"><strong>Quote:</strong> <a href='{{job.quote}}'>{{job.quote}}</a></p>
            <p class="list-group-item-text"><strong>Notes:</strong> {{job.notes}}</p>            
            <p class="list-group-item-text"><strong>Job Completed:</strong> In Progress</p>
            <div>
              <p class="list-group-item-text"><strong>Attachments:</strong> To Be Implemented...</p>
            </div>
          </div>
        </div>
        <div class="list-group">
          <div class="list-group-item">
            <h5 class="list-group-item-heading"><strong>Services:</strong></h5>
            <div ng-repeat = 'service in job.services'>
              <br>
              <p class="list-group-item-text"><strong>Service:</strong> {{service.item}}</p>
              <p class="list-group-item-text"><strong>Worker:</strong> {{service.worker.first}} {{service.worker.last}}</p>
              <p class="list-group-item-text"><strong>Date Requested:</strong> {{service.date_assigned |  date:'MM-dd-yyyy'}}</p>
              <p class="list-group-item-text"><strong>Price:</strong> {{service.price}}</p>
            </div>
          </div>
        </div>
        <div class="list-group">
          <div class="list-group-item">
            <h5 class="list-group-item-heading"><strong>Costs:</strong></h5>
            <div ng-repeat = 'cost in job.costs'>
              <br>
              <p class="list-group-item-text"><strong>Item:</strong> {{cost.item}}</p>
              <p class="list-group-item-text"><strong>Value:</strong> {{cost.value}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="page-header col-xs-12">
  <h3 class ='text-center'>Completed Jobs</h3>
</div>

<div class="panel-group col-xs-12" id="jobs_incompleted_accordion" role="tablist" aria-multiselectable="true">
  <div class="panel panel-default" ng-repeat = 'job in jobs' ng-if='job.date_completed'>
    <div class="panel-heading" role="tab">
      <h2 class="panel-title">
        <div class='row' role="button" data-toggle="collapse" data-parent="#jobs_incompleted_accordion" href="#{{job._id}}" aria-expanded="false" aria-controls="{{job._id}}">
          <span class='col-xs-4'>Property: {{job.propertie.name}}</span> 
          <span class='col-xs-2 col-xs-offset-1'>Unit: {{job.unit}}</span> 
          <span class='col-xs-4 col-xs-offset-1'>Manager: {{job.manager.first}} {{job.manager.last}}</span>
        </div>
      </h2>
    </div>
    <div id="{{job._id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
      <div class="panel-body">
        <div class="list-group">
        <div class="list-group-item">
          <ul class="nav nav-pills nav-justified">
            <li role="presentation" ui-sref = 'main_private.jobs_edit({id:job._id})'><a href="#">Edit Job</a></li>
          </ul>
        </div>  
          <div class="list-group-item">
            <h5 class="list-group-item-heading"><strong>General:</strong></h5>
            <br>
            <p class="list-group-item-text"><strong>Manager:</strong> {{job.manager.first}} {{job.manager.last}}</p>
            <p class="list-group-item-text"><strong>Property:</strong> {{job.propertie.name}}</p>
            <p class="list-group-item-text"><strong>Unit:</strong> {{job.unit}}</p>
            <p class="list-group-item-text"><strong>Price:</strong> {{job.totalPrice}} $</p>
            <p class="list-group-item-text"><strong>Cost:</strong> {{job.totalCost}} $</p>
            <p class="list-group-item-text"><strong>Invoice Number:</strong> {{job.invoiceNumber}}</p>
            <p class="list-group-item-text"><strong>poNumber:</strong> {{job.porNumber}}</p>
            <p class="list-group-item-text"><strong>Quote:</strong> <a href='{{job.quote}}'>{{job.quote}}</a></p>
            <p class="list-group-item-text"><strong>Notes:</strong> {{job.notes}}</p>            
            <p class="list-group-item-text"><strong>Job Completed:</strong> {{job.date_completed |  date:'MM-dd-yyyy'}}</p>
            <div>
              <p class="list-group-item-text"><strong>Attachments:</strong> To Be Implemented...</p>
            </div>
          </div>
        </div>
        <div class="list-group">
          <div class="list-group-item">
            <h5 class="list-group-item-heading"><strong>Services:</strong></h5>
            <div ng-repeat = 'service in job.services'>
              <br>
              <p class="list-group-item-text"><strong>Service:</strong> {{service.item}}</p>
              <p class="list-group-item-text"><strong>Worker:</strong> {{service.worker.first}} {{service.worker.last}}</p>
              <p class="list-group-item-text"><strong>Date Requested:</strong> {{service.date_assigned |  date:'MM-dd-yyyy'}}</p>
              <p class="list-group-item-text"><strong>Price:</strong> {{service.price}}</p>
            </div>
          </div>
        </div>
        <div class="list-group">
          <div class="list-group-item">
            <h5 class="list-group-item-heading"><strong>Costs:</strong></h5>
            <div ng-repeat = 'cost in job.costs'>
              <br>
              <p class="list-group-item-text"><strong>Item:</strong> {{cost.item}}</p>
              <p class="list-group-item-text"><strong>Value:</strong> {{cost.value}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
